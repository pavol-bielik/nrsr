<h1>Hlasovanie poslancov</h1>
<p>
  <b>Názov:</b>
  <%=h @voting.subject %>
</p>

<p>
  <b>Dátum hlasovania:</b>
  <%=h "#{@voting.happened_at.day}.#{@voting.happened_at.month}.#{@voting.happened_at.year}" %>
</p>

<% if current_user %>
  <h3>Vas nazor?</h3>
    <% form_tag(vote_voting_path(@voting), :method => :put) do %>
      <%= @user_vote.vote == "Z" ? radio_button_tag(:my_vote, "Z", true) : radio_button_tag(:my_vote, "Z", false) %>
      <%= label_tag(:za, "Za") %><br />
      <%= @user_vote.vote == "P" ? radio_button_tag(:my_vote, "P", true) : radio_button_tag(:my_vote, "P", false) %>
      <%= label_tag(:proti, "Proti") %><br />
      <%= submit_tag "Hlasuj", "class" => "button" %>
    <% end %>
<% else %>
    <p class="flash notice">
Aby ste mohli hlasovať musíte byť prihlásený.
</p>
<% end %>

<h3>Výsledok hlasovania</h3>

<p id="choices"></p>
<div id="error-message" style="display:none;">

<table>

  <tr class="row-a">
    <td class="first">Prítomných:</td>
    <td><%=h @voting.attending_count %></td>
  </tr>

  <tr class="row-b">
    <td class="first">Hlasujúcich:</td>
    <td><%=h @voting.voting_count %></td>
  </tr>

  <tr class="row-a">
    <td class="first">[Z] Za hlasovalo:</td>
    <td><%=h @voting.pro_count %></td>
  </tr>

  <tr class="row-b">
    <td class="first">[P] Proti hlasovalo:</td>
    <td><%=h @voting.against_count %></td>
  </tr>

  <tr class="row-a">
    <td class="first">[?] Zdržalo sa hlasovania:</td>
    <td><%=h @voting.hold_count %></td>
  </tr>     

  <tr class="row-b">
    <td class="first">[N] Nehlasovalo:</td>
    <td><%=h @voting.not_voting_count %></td>
  </tr>

  <tr class="row-a">
    <td class="first">[0] Neprítomní:</td>
    <td><%=h @voting.not_attending_count %></td>
  </tr>


</table>

    <%= render :partial => "votes", :object => @votes %>
</div>


<script id="source" language="javascript" type="text/javascript">

  function show() {

      $("#error-message").toggle();

  }

var choiceContainer = $("#choices");
    choiceContainer.append('<input type="checkbox" name="votings" id="show_votings"><label for="show_votings">Zobraz Hlasovania poslancov</label>');
    choiceContainer.find("input").click(show);

</script>